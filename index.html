<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css" />
    <title>The Sleep-Deprived Brain</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="clicker_game.js" defer></script>
    <link rel="icon" href="./assets/flavicon.svg" type="image/svg+xml" />
    <script type="module" src="global.js"></script>
    <script type="module" src="brain.js"></script>
    <script src="plotly_plots.js" defer></script>

</head>
<body>
    <!-- landing page -->
    <div class="hero">
        <h1>Error 404: Sleep Not Found</h1>
        <p>Explore how 24 hours without sleep transforms neural activity, cognitive performance, and brain connectivity.</p>
        <div class="scroll-indicator" id="scroll-down">
            <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M5 12l7 7 7-7"/>
            </svg>
        </div>
    </div>

    <!-- Brain/Intro -->
    <section id="intro-data" class="section two-column-layout">
        <div class="text-column">
            <h2>
                Brain Activity Visualization
            </h2>

            <br>

            <p>
                What actually happens when you stay awake for 24 hours straight? <br>
                We looked at real data from a neuroscience study that recorded brain activity and cognitive performance
                before and after sleep deprivation using something called <strong>fNIRS</strong>
                (functional near-infrared spectroscopy).
            </p>

            <p>
                Basically, scientists tracked blood flow in the brain while people did tasks like tapping their fingers
                and reacting to visual prompts. They also ran detailed memory and reaction tests using a touchscreen device.
            </p>

            <p>
                The result? Sleep-deprived brains struggle ‚Äî especially in areas that control decision-making, memory, and attention.
            </p>

            <p>
                So before you flex that all-nighter, maybe take a look at what it does to your brain.
            </p>
        </div>

        <!-- 3D Brain Hologram Container -->
        <div class="brain-column">
            <div id="container3D" style="width: 100%; height: 400px; border-radius: 10px; overflow: hidden; background: linear-gradient(135deg, #1a1a2e, #16213e); border: 2px solid #4a90e2; box-shadow: 0 0 20px rgba(74, 144, 226, 0.3);"></div>
        </div>

    </section>

    <!-- clicer game -->
    <div class="section" id="five-choice-test">
        <div class="container">
            <h2>5-Choice Reaction Time Test</h2>
            <p>
                A circle will light up randomly. Press the corresponding key (<strong>S D F J K</strong>) on your keyboard as fast as you can.
            </p>

            <br>

            <div id="rti-grid">
                <div class="rti-option" data-key="s">S</div>
                <div class="rti-option" data-key="d">D</div>
                <div class="rti-option" data-key="f">F</div>
                <div class="rti-option" data-key="j">J</div>
                <div class="rti-option" data-key="k">K</div>
            </div>

            <br>

            <div style="text-align: center; margin-top: 30px;">
                <button id="start-rti-btn" class="state-button">Start Test</button>
            </div>
            <div id="rti-results" style="margin-top: 30px; text-align: center; display: none;"></div>
        </div>
    </div>

    <!-- CANTAB bar chart -->
    <section class="section">
        <div class="container">
            <h2>
                Cognitive Domains Most Affected by Sleep Loss
            </h2>
            <canvas id="cantabChart" style="width: 100%; height: 500px;"></canvas>

            <p>
                Negative values show how much worse people performed after sleep deprivation. 
                Memory and attention suffer the most.
            </p>
        </div>
    </section>

    <div class="section">
        <div class="container">
            <!-- Scientific Background Information -->
            <h2>Brain Activity Line Plots</h2>
                <p class="section-subtitle">
                    Play around with the toggles. See how the oxygenated (HbO) and deoxygenated (HbR) hemoglobin levels differ
                    before and after sleep deprivation.
                </p>

                <div class="info-box">
                    <h3>üß† What Are HbO and HbR, and Why Should You Care?</h3>
                    <p>
                        Your brain needs oxygen to think, move, and process information. <strong>HbO (oxygenated hemoglobin)</strong> delivers oxygen to active brain areas, while <strong>HbR (deoxygenated hemoglobin)</strong> is what‚Äôs left after that oxygen is used up.
                    </p>
                    <p>
                        By tracking HbO and HbR, we can observe which brain regions are more active. During tasks like finger tapping, HbO typically increases, while HbR decreases slightly or follows a mirrored pattern. This change‚Äîcalled a <strong>neurovascular response</strong>‚Äîsignals healthy oxygen flow and brain activation.
                    </p>

                    <h3>üò¥ What Changes After Sleep Deprivation?</h3>
                    <p>
                        After 24 hours without sleep, we saw a consistent <strong>increase in HbO</strong> and more erratic <strong>HbR fluctuations</strong>. In the plots, red lines (after SD) rise above blue lines (before SD), reflecting this shift.
                    </p>
                    <p>
                        The rise in HbO means the brain is pushing harder‚Äîit's trying to stay engaged, but with less efficiency. Meanwhile, the unstable HbR response shows that while the system is still delivering and removing blood, it‚Äôs doing so less effectively.
                    </p>
                    <p>
                        In simpler terms: your brain is still doing the work, but it takes more "fuel" to get the same job done. Think of it like riding a bike with a flat tire‚Äîpossible, but harder, slower, and more exhausting.
                    </p>

                    <p>
                        In short: <strong>Higher HbO = more effort</strong>. <strong>Fluctuating HbR = reduced efficiency</strong>. These patterns reflect a tired brain working overtime just to keep up.
                    </p>

                    <p class="tldr">
                        TL;DR: Your brain still functions after sleep loss‚Äîbut it‚Äôs running on low power. These signals explain why sleep-deprived brains have trouble with focus, memory, and quick thinking. Be kind to your brain‚Äî<strong>sleep is non-negotiable</strong>.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- PLOTLY -->
    <div class="section">
        <div class="container">
            <h2>Interactive Brain Activity Plots</h2>
            
            <!-- Control Panel -->
            <div class="plot-controls">
                <div class="control-group">
                    <div class="control-item">
                        <label for="subject-selector">Subject:</label>
                        <select id="subject-selector">
                            <option value="001">Subject 001</option>
                            <option value="003">Subject 003</option>
                            <option value="004">Subject 004</option>
                            <option value="005">Subject 005</option>
                            <option value="006">Subject 006</option>
                            <option value="007">Subject 007</option>
                            <option value="008">Subject 008</option>
                            <option value="009">Subject 009</option>
                        </select>
                    </div>
                </div>
                
                <div class="plot-description">
                    <p id="plot-description-text">
                        Interactive plots showing changes in oxygenated (HbO) and deoxygenated (HbR) hemoglobin levels 
                        before and after sleep deprivation. </p>
                        <p style="color: #ff0000;"><strong>Blue lines = Before sleep deprivation</strong></p>, 
                        <p style="color: #003fff;"> <strong>Red lines = After sleep deprivation</strong></p>. 
                         Hover over lines for exact values, zoom in/out, and click legend items to toggle traces.
                    </p>
                </div>

                <!-- Main Plot Display -->
                <div class="main-plot-container">
                    <iframe id="main-plot-iframe" 
                            src="website_plots/subject_001_single_channel.html" 
                            frameborder="0">
                    </iframe>
                    <div class="plot-loading" id="plot-loading" style="display: none;">
                        <div class="loading-spinner"></div>
                        <p>Loading plot...</p>
                    </div>
                    <div class="plot-error" id="plot-error" style="display: none;">
                        <p>‚ö†Ô∏è Plot not available. Make sure you've exported the plots from Jupyter.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
</html>