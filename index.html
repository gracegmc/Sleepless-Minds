<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css" />
    <title>The Sleep-Deprived Brain</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="clicker_game.js" defer></script>
    <link rel="icon" href="./assets/flavicon.svg" type="image/svg+xml" />
    <script type="module" src="global.js"></script>
    <script type="module" src="brain.js"></script>
    <script src="plotly_plots.js" defer></script>

</head>
<body>
    <div class="hero">
        <h1>Error 404: Sleep Not Found</h1>
        <p>Explore how 24 hours without sleep transforms neural activity, cognitive performance, and brain connectivity.</p>
        <div class="scroll-indicator" id="scroll-down">
            <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M5 12l7 7 7-7"/>
            </svg>
        </div>
    </div>

    <section id="intro-data" class="section two-column-layout">
        <div class="text-column">
            <h2 style="text-align: center; font-size: 2.8rem; margin-bottom: 1.5rem; color: #4a90e2;">
                Brain Activity Visualization
            </h2>

            <br>

            <p style="text-align: left; font-size: 1.2rem; margin-bottom: 2rem; line-height: 1.8;">
                What actually happens when you stay awake for 24 hours straight? <br>
                We looked at real data from a neuroscience study that recorded brain activity and cognitive performance
                before and after sleep deprivation using something called <strong>fNIRS</strong>
                (functional near-infrared spectroscopy).
            </p>

            <p style="font-size: 1.1rem; line-height: 1.8; margin-bottom: 1.5rem;">
                Basically, scientists tracked blood flow in the brain while people did tasks like tapping their fingers
                and reacting to visual prompts. They also ran detailed memory and reaction tests using a touchscreen device.
            </p>

            <p style="font-size: 1.1rem; line-height: 1.8; margin-bottom: 1.5rem;">
                The result? Sleep-deprived brains struggle ‚Äî especially in areas that control decision-making, memory, and attention.
            </p>

            <p style="font-size: 1.1rem; line-height: 1.8;">
                So before you flex that all-nighter, maybe take a look at what it does to your brain.
            </p>
        </div>

        <!-- 3D Brain Hologram Container -->
        <div class="brain-column">
            <div id="container3D" style="width: 100%; height: 400px; border-radius: 10px; overflow: hidden; background: linear-gradient(135deg, #1a1a2e, #16213e); border: 2px solid #4a90e2; box-shadow: 0 0 20px rgba(74, 144, 226, 0.3);"></div>
        </div>

    </section>

    <div class="section" id="five-choice-test">
        <div class="container">
            <h2 style="text-align: center; font-size: 2.5rem; margin-bottom: 40px; color: #4a90e2;">5-Choice Reaction Time Test</h2>
            <p style="text-align: center; font-size: 1.2rem; margin-bottom: 40px;">
                A circle will light up randomly. Press the corresponding key (<strong>S D F J K</strong>) on your keyboard as fast as you can.
            </p>

            <br>

            <div id="rti-grid">
                <div class="rti-option" data-key="s">S</div>
                <div class="rti-option" data-key="d">D</div>
                <div class="rti-option" data-key="f">F</div>
                <div class="rti-option" data-key="j">J</div>
                <div class="rti-option" data-key="k">K</div>
            </div>

            <br>

            <div style="text-align: center; margin-top: 30px;">
                <button id="start-rti-btn" class="state-button">Start Test</button>
            </div>
            <div id="rti-results" style="margin-top: 30px; text-align: center; display: none;"></div>
        </div>
    </div>

    <section class="section">
        <div class="container">
            <h2 style="text-align: center; font-size: 2.5rem; margin-bottom: 40px; color: #4a90e2;">
                Cognitive Domains Most Affected by Sleep Loss
            </h2>
            <canvas id="cantabChart" style="width: 100%; height: 500px;"></canvas>

            <p style="text-align: center; margin-top: 1.5rem; font-size: 1.1rem;">
                Negative values show how much worse people performed after sleep deprivation. Memory and attention suffer the most.
            </p>
        </div>
    </section>

    <div class="section">
        <div class="container">
            <h2 style="text-align: center; font-size: 2.5rem; margin-bottom: 40px; color: #4a90e2;">Interactive Brain Activity Plots</h2>
            
            <!-- Control Panel -->
            <div class="plot-controls">
                <div class="control-group">
                    <div class="control-item">
                        <label for="subject-selector">Subject:</label>
                        <select id="subject-selector">
                            <option value="001">Subject 001</option>
                            <option value="003">Subject 003</option>
                            <option value="004">Subject 004</option>
                            <option value="005">Subject 005</option>
                            <option value="006">Subject 006</option>
                            <option value="007">Subject 007</option>
                            <option value="008">Subject 008</option>
                            <option value="009">Subject 009</option>
                        </select>
                    </div>
                    
                    <div class="control-item">
                        <label for="plot-type-selector">Analysis Type:</label>
                        <select id="plot-type-selector">
                            <option value="single_channel">Single Channel</option>
                            <option value="frontal">Frontal Region</option>
                            <option value="motor">Motor Region</option>
                            <option value="parietal">Parietal Region</option>
                        </select>
                    </div>
                </div>
                
                <div class="plot-description">
                    <p id="plot-description-text">
                        Interactive plots showing changes in oxygenated (HbO) and deoxygenated (HbR) hemoglobin levels 
                        before and after sleep deprivation. <strong>Blue lines = Before sleep deprivation</strong>, 
                        <strong>Red lines = After sleep deprivation</strong>. Hover over lines for exact values, zoom in/out, and click legend items to toggle traces.
                    </p>
                </div>
            </div>

            <!-- Scientific Background Information -->
            <div style="background-color: #f9f9f9; border-left: 6px solid #4a90e2; padding: 20px; margin-bottom: 40px; border-radius: 8px;">
                <h3 style="color: #333; font-size: 1.5rem;">üß† What Are HbO and HbR, and Why Should You Care?</h3>
                <p style="font-size: 1.1rem; line-height: 1.6; color: #333;">
                    Your brain needs oxygen to think, move, and process. <strong>HbO (oxygenated hemoglobin)</strong> brings oxygen to active brain areas, while <strong>HbR (deoxygenated hemoglobin)</strong> is what remains after that oxygen is used.
                </p>
                <p style="font-size: 1.1rem; line-height: 1.6; color: #333;">
                    Tracking these levels tells us how engaged different parts of the brain are. During focused activity‚Äîlike finger tapping‚ÄîHbO usually rises, while HbR drops or follows a complementary wave. This is a normal <strong>neurovascular response</strong> that reflects efficient oxygen delivery and usage.
                </p>

                <h3 style="color: #333; font-size: 1.5rem; margin-top: 30px;">üò¥ What Happens After Sleep Deprivation?</h3>
                <p style="font-size: 1.1rem; line-height: 1.6; color: #333;">
                    After 24 hours without sleep, both HbO and HbR levels show a drop in amplitude. In the graph, this is seen as the red lines (after SD) consistently falling below the blue lines (before SD).
                </p>
                <p style="font-size: 1.1rem; line-height: 1.6; color: #333;">
                    The <strong>HbO decrease</strong> suggests reduced brain activation‚Äîyour brain isn't "lighting up" as much in response to tasks. But the <strong>HbR pattern remains smooth and predictable</strong>, just lower overall. That means the mechanism of blood flow and oxygen exchange is still working, but at a lower capacity.
                </p>
                <p style="font-size: 1.1rem; line-height: 1.6; color: #333;">
                    In simpler terms: your brain is trying to do its job, but with less energy. Like a phone on low battery, it still runs‚Äîjust slower and less effectively.
                </p>

                <p style="font-size: 1.1rem; line-height: 1.6; color: #333;">
                    So? <strong>Lower HbO = lower brain activation.</strong> <strong>Lower HbR = less oxygen being consumed.</strong> Together, they reflect an overall drop in mental effort and capacity. That's why sleep-deprived brains often struggle with focus, memory, and reaction time.
                </p>

                <p style="font-size: 1.1rem; line-height: 1.6; font-style: italic; color: #333;">
                    TL;DR: The brain still functions after sleep loss‚Äîbut at reduced power. These hemodynamic signals prove why rest matters for performance. Be kind to your brain. Sleep is non-negotiable.
                </p>
            </div>

            <!-- Main Plot Display -->
            <div class="main-plot-container">
                <iframe id="main-plot-iframe" 
                        src="website_plots/subject_001_single_channel.html" 
                        frameborder="0">
                </iframe>
                <div class="plot-loading" id="plot-loading" style="display: none;">
                    <div class="loading-spinner"></div>
                    <p>Loading plot...</p>
                </div>
                <div class="plot-error" id="plot-error" style="display: none;">
                    <p>‚ö†Ô∏è Plot not available. Make sure you've exported the plots from Jupyter.</p>
                </div>
            </div>
    </div>

</body>
</html>